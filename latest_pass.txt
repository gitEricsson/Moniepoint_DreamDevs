============================= test session starts =============================
platform win32 -- Python 3.13.7, pytest-8.3.3, pluggy-1.6.0 -- C:\Users\erics\AppData\Local\Programs\Python\Python313\python.exe
cachedir: .pytest_cache
rootdir: C:\Users\erics\Desktop\Moniepoint
configfile: pytest.ini
plugins: anyio-4.11.0, asyncio-0.24.0, cov-6.0.0
asyncio: mode=Mode.AUTO, default_loop_scope=None
collecting ... collected 42 items

src/modules/analytics/tests/test_analytics.py::TestTopMerchant::test_returns_200 PASSED [  2%]
src/modules/analytics/tests/test_analytics.py::TestTopMerchant::test_response_shape PASSED [  4%]
src/modules/analytics/tests/test_analytics.py::TestTopMerchant::test_correct_merchant PASSED [  7%]
src/modules/analytics/tests/test_analytics.py::TestMonthlyActiveMerchants::test_returns_200 PASSED [  9%]
src/modules/analytics/tests/test_analytics.py::TestMonthlyActiveMerchants::test_response_is_dict PASSED [ 11%]
src/modules/analytics/tests/test_analytics.py::TestMonthlyActiveMerchants::test_month_key_format PASSED [ 14%]
src/modules/analytics/tests/test_analytics.py::TestMonthlyActiveMerchants::test_january_count PASSED [ 16%]
src/modules/analytics/tests/test_analytics.py::TestProductAdoption::test_returns_200 PASSED [ 19%]
src/modules/analytics/tests/test_analytics.py::TestProductAdoption::test_response_is_sorted_descending PASSED [ 21%]
src/modules/analytics/tests/test_analytics.py::TestProductAdoption::test_known_products_present PASSED [ 23%]
src/modules/analytics/tests/test_analytics.py::TestKYCFunnel::test_returns_200 PASSED [ 26%]
src/modules/analytics/tests/test_analytics.py::TestKYCFunnel::test_response_has_three_fields PASSED [ 28%]
src/modules/analytics/tests/test_analytics.py::TestKYCFunnel::test_funnel_values PASSED [ 30%]
src/modules/analytics/tests/test_analytics.py::TestFailureRates::test_returns_200 PASSED [ 33%]
src/modules/analytics/tests/test_analytics.py::TestFailureRates::test_response_is_list PASSED [ 35%]
src/modules/analytics/tests/test_analytics.py::TestFailureRates::test_each_item_has_required_fields PASSED [ 38%]
src/modules/analytics/tests/test_analytics.py::TestFailureRates::test_sorted_descending PASSED [ 40%]
src/modules/analytics/tests/test_analytics.py::TestFailureRates::test_bills_failure_rate PASSED [ 42%]
src/modules/analytics/tests/test_analytics.py::TestHealth::test_health_endpoint PASSED [ 45%]
src/modules/analytics/tests/test_repositories.py::TestActivityRepository::test_count_total_empty PASSED [ 47%]
src/modules/analytics/tests/test_repositories.py::TestActivityRepository::test_bulk_insert_returns_count PASSED [ 50%]
src/modules/analytics/tests/test_repositories.py::TestAnalyticsRepository::test_top_merchant_returns_highest_volume PASSED [ 52%]
src/modules/analytics/tests/test_repositories.py::TestAnalyticsRepository::test_monthly_active_merchants_counts PASSED [ 54%]
src/modules/analytics/tests/test_repositories.py::TestAnalyticsRepository::test_product_adoption_sorted_desc PASSED [ 57%]
src/modules/analytics/tests/test_repositories.py::TestAnalyticsRepository::test_kyc_funnel_values PASSED [ 59%]
src/modules/analytics/tests/test_repositories.py::TestAnalyticsRepository::test_failure_rates_formula PASSED [ 61%]
src/modules/analytics/tests/test_repositories.py::TestAnalyticsRepository::test_failure_rates_sorted_desc PASSED [ 64%]
src/modules/importer/tests/test_import.py::TestParseRow::test_valid_row_parses_correctly PASSED [ 66%]
src/modules/importer/tests/test_import.py::TestParseRow::test_missing_merchant_id_skipped PASSED [ 69%]
src/modules/importer/tests/test_import.py::TestParseRow::test_missing_event_timestamp_skipped PASSED [ 71%]
src/modules/importer/tests/test_import.py::TestParseRow::test_invalid_amount_coerced_to_zero PASSED [ 73%]
src/modules/importer/tests/test_import.py::TestParseRow::test_invalid_status_skipped PASSED [ 76%]
src/modules/importer/tests/test_import.py::TestParseRow::test_invalid_product_skipped PASSED [ 78%]
src/modules/importer/tests/test_import.py::TestParseRow::test_duplicate_event_id_skipped PASSED [ 80%]
src/modules/importer/tests/test_import.py::TestParseRow::test_malformed_event_id_skipped PASSED [ 83%]
src/modules/importer/tests/test_import.py::TestParseRow::test_empty_event_id_skipped PASSED [ 85%]
src/modules/importer/tests/test_import.py::TestParseRow::test_pending_status_accepted PASSED [ 88%]
src/modules/importer/tests/test_import.py::TestParseRow::test_failed_status_accepted PASSED [ 90%]
src/modules/importer/tests/test_import.py::TestParseRow::test_amount_zero_accepted PASSED [ 92%]
src/modules/importer/tests/test_import.py::TestActivityCreateSchema::test_valid_schema_creates_correctly PASSED [ 95%]
src/modules/importer/tests/test_import.py::TestActivityCreateSchema::test_amount_string_coercion PASSED [ 97%]
src/modules/importer/tests/test_import.py::TestActivityCreateSchema::test_to_db_dict_has_all_keys PASSED [100%]

============================== warnings summary ===============================
..\..\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\formparsers.py:12
  C:\Users\erics\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\formparsers.py:12: PendingDeprecationWarning: Please use `import python_multipart` instead.
    import multipart

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
======================== 42 passed, 1 warning in 0.65s ========================
